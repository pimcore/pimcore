/*! picturePolyfill - v4.2.0 - 2014-09-16
 * https://github.com/verlok/picturePolyfill/
 * Copyright (c) 2014 Andrea "verlok" Verlicchi; Licensed MIT */
var picturePolyfill=function(a){"use strict";var b,c,d,e=100,f=!1;return{_getAttrs:function(a,b){for(var c,d,e={},f=0,g=b.length;g>f;f+=1)c=b[f],d=a.getAttribute(c),d&&(e[c]=d);return e},_getAttrsList:function(a){for(var b=[],c=0,d=a.attributes,e=d.length;e>c;c++)b.push(d.item(c).nodeName);return b},_getSrcsetArray:function(a){var b,c,d,e,f=[];if(null===a||""===a||"undefined"==typeof a)return f;e=a.split(",");for(var g=0,h=e.length;h>g;g+=1)b=e[g].trim().split(" "),d=1===b.length?1:parseFloat(b[b.length-1],10),c=b[0],f.push({pxr:d,src:c});return f.sort(function(a,b){var c=a.pxr,d=b.pxr;return d>c?-1:c>d?1:0})},_getSrcFromSrcset:function(a,b){var c,d,e=0,f=-1;if(null===a||""===a||"undefined"==typeof a)return"";c=this._getSrcsetArray(a),d=c.length;do(c[e].pxr>=b||e===d-1)&&(f=e),e+=1;while(!(f>-1||e>=d));return c[f].src},_getSrcsetFromData:function(b){for(var c,d,e,f,g=0,h=b.length;h>g;g+=1)if(c=b[g],d=c.media,f=c.srcset,e=c.src,!d||a.matchMedia(d).matches)return f?f:e?e:"";return""},_getImgTagsInPicture:function(a){var b,c=a;if(b=a.getElementsByTagName("img"),b.length>0)return b;do if(c=c.nextSibling,null===c)return[];while("IMG"!==c.tagName);return[c]},_setImgAttributes:function(a,b){function c(a,b,c){a.getAttribute(b)!==c&&a.setAttribute(b,c)}var d,e,f,g,h,i=this._getImgTagsInPicture(a);return 0===i.length?!1:(d=i[0],d.getAttribute("data-original-src")||(c(d,"data-original-src",d.getAttribute("src")),c(d,"data-original-srcset",d.getAttribute("srcset"))),e=b.src,f=b.srcset,e||f?(g=e,h=f):(g=d.getAttribute("data-original-src"),h=d.getAttribute("data-original-srcset")),c(d,"src",g),void c(d,"srcset",h))},_getSourcesData:function(a){for(var b,c,d=[],e=a.getElementsByTagName("source"),f=0,g=e.length;g>f;f+=1)b=e[f],c=this._getAttrs(b,this._getAttrsList(b)),d.push(c);return d},_addListeners:function(){function b(){picturePolyfill.parse(document)}function c(){clearTimeout(d),d=setTimeout(b,e)}return!this.isUseful||f?!1:(a.addEventListener?(a.addEventListener("resize",c),a.addEventListener("DOMContentLoaded",function(){b(),a.removeEventListener("load",b)}),a.addEventListener("load",b)):a.attachEvent&&(a.attachEvent("onload",b),a.attachEvent("onresize",c)),void(f=!0))},initialize:function(){this._pxRatio=a.devicePixelRatio||1,this._mqSupport=!!a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,this.isUseful=!a.HTMLPictureElement,b=[],c=0,this._addListeners()},parse:function(a,d){var e,f,g,h,i,j,k;if(!this.isUseful)return 0;"undefined"==typeof d&&(d=!0),g=(a||document).getElementsByTagName("picture"),j=this._mqSupport;for(var l=0,m=g.length;m>l;l+=1)e=null,f=g[l],d&&(k=f.getAttribute("data-cache-index"),null!==k&&(e=b[k])),e||(e=this._getSourcesData(f),b[c]=e,f.setAttribute("data-cache-index",c),c+=1),j&&0!==e.length?(i=this._getSrcsetFromData(e),h=this._getSrcFromSrcset(i,this._pxRatio)):(h=f.getAttribute("data-default-src"),i=f.getAttribute("data-default-srcset")),this._setImgAttributes(f,{src:h,srcset:i,alt:f.getAttribute("data-alt")});return l}}}(window);picturePolyfill.initialize(),picturePolyfill.parse();