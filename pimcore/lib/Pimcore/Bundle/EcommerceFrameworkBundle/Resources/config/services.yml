services:
    pimcore.ecommerceframework.installer:
        class: Pimcore\Bundle\EcommerceFrameworkBundle\Tools\Installer
        arguments: ['@logger']
        tags:
            - { name: monolog.logger, channel: pimcore_ecommerce.installer }

    pimcore.ecommerceframework.session_configurator:
        class: Pimcore\Bundle\EcommerceFrameworkBundle\Tools\SessionConfigurator
        tags:
            - { name: pimcore.session.configurator }

    pimcore.ecommerceframework.index_update_listener:
        class: Pimcore\Bundle\EcommerceFrameworkBundle\EventListener\IndexUpdateListener
        tags:
            - { name: kernel.event_subscriber }
            - { name: monolog.logger, channel: pimcore_ecommerce_indexupdater }

    pimcore.ecommerceframework.system_listener:
        class: Pimcore\Bundle\EcommerceFrameworkBundle\EventListener\SystemEventsListener
        arguments: ['@service_container']
        tags:
            - { name: kernel.event_subscriber }
            - { name: monolog.logger, channel: pimcore_ecommerce }

    pimcore_ecommerce.price_systems_locator:
        class: Symfony\Component\DependencyInjection\ServiceLocator
        tags: ['container.service_locator']

    pimcore_ecommerce.availability_systems_locator:
        class: Symfony\Component\DependencyInjection\ServiceLocator
        tags: ['container.service_locator']

    Pimcore\Bundle\EcommerceFrameworkBundle\Factory:
        arguments:
            - '@service_container'
            - '@pimcore_ecommerce.environment'
            - '@pimcore_ecommerce.price_systems_locator'
            - '@pimcore_ecommerce.availability_systems_locator'
            - '@pimcore_ecommerce.voucher_service'
            - '@pimcore_ecommerce.voucher_service.token_manager_factory'
